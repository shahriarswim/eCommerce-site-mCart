<%- include("partials/header.ejs") %>

<Section id="productPage">
  <div class="container-fluid about-top">
    <h1><%= name %></h1>
  </div>
  <div class="container-fluid container-admin">
    <!-- Upper Part -->
    <div class="row">
      <div class="col-md-6 mb-3">
        <img src="<%= imageUrl %> " alt="product image" width="90%" />
      </div>
      <div class="col-md-6">
        <div>
          <h5 class="font-weight-bold">Name:</h5>
          <p>
            <%= name %>
            <a href="#lowerTab" style="color: teal;">
              [ <%= rating %>/5 (<%= numOfReviewer %> Reviews ) ]
            </a>
          </p>
        </div>
        <div>
          <h5 class="font-weight-bold">Description:</h5>
          <p><%= description %></p>
        </div>
        <div>
          <h5 class="font-weight-bold">Price:</h5>
          <p><%= price %> TK</p>
        </div>
        <div>
          <h5 class="font-weight-bold">Size:</h5>
          <p><%= size %></p>
        </div>
        <a href="/add-to-cart/<%= name %> " class="btn btn-dark" type="submit"
          >Add to cart</a
        >
      </div>
    </div>
    <!-- Lower Part -->
    <div id="lowerTab" class="my-5">
      <nav>
        <div class="nav nav-tabs" id="nav-tab" role="tablist">
          <a
            class="nav-item nav-link active"
            id="nav-description-tab"
            data-toggle="tab"
            href="#nav-description"
            role="tab"
            aria-controls="nav-description"
            aria-selected="true"
            >Description</a
          >
          <a
            class="nav-item nav-link"
            id="nav-sizeChart-tab"
            data-toggle="tab"
            href="#nav-sizeChart"
            role="tab"
            aria-controls="nav-sizeChart"
            aria-selected="false"
            >Size Chart</a
          >
          <a
            class="nav-item nav-link"
            id="nav-reviews-tab"
            data-toggle="tab"
            href="#nav-reviews"
            role="tab"
            aria-controls="nav-reviews"
            aria-selected="false"
            >Reviews</a
          >
        </div>
      </nav>
      <!-- Description Part -->
      <div class="tab-content" id="nav-tabContent">
        <div
          class="tab-pane fade show active"
          id="nav-description"
          role="tabpanel"
          aria-labelledby="nav-description-tab"
        >
          <div class="mt-3">
            <h3 class="font-weight-bold">Description:</h3>
            <p><%= description %></p>
          </div>
        </div>
        <!-- Size Chart Part -->
        <div
          class="tab-pane fade"
          id="nav-sizeChart"
          role="tabpanel"
          aria-labelledby="nav-sizeChart-tab"
        >
          <div class="mt-3">
            <h3 class="font-weight-bold">Size Chart:</h3>
          </div>
        </div>
        <!-- Reviews Part -->
        <div
          class="tab-pane fade"
          id="nav-reviews"
          role="tabpanel"
          aria-labelledby="nav-reviews-tab"
        >
          <div class="mt-3">
            <h3 class="font-weight-bold" aria-describedby="reviewNote">
              Review this product:
            </h3>
            <small id="reviewNote" class="form-text text-muted">
              <p class="m-0" style="color: red;">
                **Only for logged in users.
              </p>
            </small>
            <form action="/review" method="post">
              <div class="form-group">
                <input
                  type="text"
                  name="productName"
                  id=""
                  value="<%= name %>"
                  hidden
                />
                <label for="score">Score:</label>
                <select class="form-control" name="score" id="">
                  <option value="5">5</option>
                  <option value="4">4</option>
                  <option value="3">3</option>
                  <option value="2">2</option>
                  <option value="1">1</option>
                </select>
                <label class="mt-2" for="comment">Comment:</label>
                <textarea
                  class="form-control"
                  name="comment"
                  id=""
                  rows="4"
                ></textarea>
              </div>
              <div class="text-center">
                <button class="btn btn-dark" type="submit">
                  Submit
                </button>
              </div>
            </form>
          </div>
          <div class="mt-3">
            <h3 class="font-weight-bold">
              Reviews:
            </h3>
            <p style="color: teal;">
              <%= rating %>/5 (<%= numOfReviewer %> Reviews )
            </p>
            <% reviewer.forEach(function(review) { %>
            <div class="reviewers mb-3">
              <h5>Name: <%= review.userName %></h5>
              <h5>Score: <%= review.score %>/5</h5>
              <h5>Comment: "<%= review.comment %>"</h5>
            </div>
          </div>

          <% }); %>
        </div>
      </div>
    </div>
  </div>
</Section>

<%- include("partials/footer.ejs") %>
